{"version":3,"file":"anchor-behaviors.umd.js","sources":["anchor-behaviors.umd.js"],"sourcesContent":["/**\n * Copyright 2018 The Pennsylvania State University\n * @license Apache-2.0, see License.md for full text.\n */\n\n// register globally so we can make sure there is only one\nwindow.AnchorBehaviors = window.AnchorBehaviors || {};\n// request if this exists. This helps invoke the el existing in the dom\n// as well as that there is only one of them. That way we can ensure everything\n// is rendered through the same modal\nwindow.AnchorBehaviors.getTarget = (element = null) => {\n  /** gets and sets parameters */\n  let getParams = () => {\n      let str =\n          window.location.hash.substring(1).replace(/^(.+)&?/, \"id=$1\") ||\n          window.location.search.substring(1) ||\n          \"\",\n        uri = str\n          ? `{\"${decodeURI(str)\n              .replace(/\"/g, '\\\\\"')\n              .replace(/&/g, '\",\"')\n              .replace(/=/g, '\":\"')}\"}`\n          : \"{}\",\n        isJSON = json => {\n          try {\n            JSON.parse(json);\n          } catch (e) {\n            return false;\n          }\n          return true;\n        },\n        params = uri && isJSON(uri) ? JSON.parse(uri) : {};\n      window.AnchorBehaviors.params = params;\n    },\n    testElement = (element, params) => {\n      if (element && (params.id || params.resource)) {\n        let eid = element.id ? element.id.replace(/#/g, \"\") : null,\n          er = element.resource ? element.resource.replace(/#/g, \"\") : null,\n          pid = params.id ? params.id.replace(/#/g, \"\") : null,\n          pr = params.resource ? params.resource.replace(/#/g, \"\") : null;\n        if (\n          (eid && eid === pid) ||\n          (eid && eid === pr) ||\n          (er && er === pid) ||\n          (er && er === pr)\n        )\n          return element;\n      }\n    };\n\n  /** sets target element */\n  if (!window.AnchorBehaviors.target) {\n    if (!window.AnchorBehaviors.params) {\n      if (document.readyState === \"complete\") {\n        getParams();\n      }\n      window.onload = getParams();\n    }\n    /** search for all combos of id and resource id */\n    window.AnchorBehaviors.target =\n      document.getElementById(window.AnchorBehaviors.params.id) ||\n      document.getElementById(`#${window.AnchorBehaviors.params.id}`) ||\n      document.querySelector(\n        `[resource=\"#${window.AnchorBehaviors.params.id ||\n          window.AnchorBehaviors.params.resource}\"]`\n      ) ||\n      document.querySelector(\n        `[resource=\"${window.AnchorBehaviors.params.id ||\n          window.AnchorBehaviors.params.resource}\"]`\n      ) ||\n      testElement(element, window.AnchorBehaviors.params) ||\n      null;\n    if (window.AnchorBehaviors.target)\n      window.AnchorBehaviors.target.scrollIntoView();\n  }\n  return window.AnchorBehaviors.target;\n};\n"],"names":["window","AnchorBehaviors","getTarget","element","getParams","str","location","hash","substring","replace","search","uri","decodeURI","params","json","JSON","parse","e","isJSON","target","document","readyState","onload","getElementById","id","querySelector","resource","eid","er","pid","pr","testElement","scrollIntoView"],"mappings":"0FAMAA,OAAOC,gBAAkBD,OAAOC,iBAAmB,GAInDD,OAAOC,gBAAgBC,UAAY,eAACC,yDAAU,KAExCC,EAAY,eACRC,EACAL,OAAOM,SAASC,KAAKC,UAAU,GAAGC,QAAQ,UAAW,UACrDT,OAAOM,SAASI,OAAOF,UAAU,IACjC,GACFG,EAAMN,cACGO,UAAUP,GACZI,QAAQ,KAAM,OACdA,QAAQ,KAAM,OACdA,QAAQ,KAAM,aACjB,KASJI,EAASF,GARA,SAAAG,OAELC,KAAKC,MAAMF,GACX,MAAOG,UACA,SAEF,EAEOC,CAAOP,GAAOI,KAAKC,MAAML,GAAO,GAClDX,OAAOC,gBAAgBY,OAASA,UAmB/Bb,OAAOC,gBAAgBkB,SACrBnB,OAAOC,gBAAgBY,SACE,aAAxBO,SAASC,YACXjB,IAEFJ,OAAOsB,OAASlB,KAGlBJ,OAAOC,gBAAgBkB,OACrBC,SAASG,eAAevB,OAAOC,gBAAgBY,OAAOW,KACtDJ,SAASG,0BAAmBvB,OAAOC,gBAAgBY,OAAOW,MAC1DJ,SAASK,oCACQzB,OAAOC,gBAAgBY,OAAOW,IAC3CxB,OAAOC,gBAAgBY,OAAOa,iBAElCN,SAASK,mCACOzB,OAAOC,gBAAgBY,OAAOW,IAC1CxB,OAAOC,gBAAgBY,OAAOa,iBAlCtB,SAACvB,EAASU,MAClBV,IAAYU,EAAOW,IAAMX,EAAOa,UAAW,KACzCC,EAAMxB,EAAQqB,GAAKrB,EAAQqB,GAAGf,QAAQ,KAAM,IAAM,KACpDmB,EAAKzB,EAAQuB,SAAWvB,EAAQuB,SAASjB,QAAQ,KAAM,IAAM,KAC7DoB,EAAMhB,EAAOW,GAAKX,EAAOW,GAAGf,QAAQ,KAAM,IAAM,KAChDqB,EAAKjB,EAAOa,SAAWb,EAAOa,SAASjB,QAAQ,KAAM,IAAM,QAE1DkB,GAAOA,IAAQE,GACfF,GAAOA,IAAQG,GACfF,GAAMA,IAAOC,GACbD,GAAMA,IAAOE,EAEd,OAAO3B,GAwBX4B,CAAY5B,EAASH,OAAOC,gBAAgBY,SAC5C,KACEb,OAAOC,gBAAgBkB,QACzBnB,OAAOC,gBAAgBkB,OAAOa,kBAE3BhC,OAAOC,gBAAgBkB"}