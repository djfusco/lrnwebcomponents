{"version":3,"file":"place-holder.umd.js","sources":["place-holder.umd.js"],"sourcesContent":["import { SimpleColors } from \"@lrnwebcomponents/simple-colors/simple-colors.js\";\nimport { html, css } from \"lit-element/lit-element.js\";\n/**\n * `place-holder`\n * @element place-holder\n * Placeholder for a piece of media in the future\n *\n * @demo demo/index.html\n *\n * @microcopy - the mental model for this element\n * - placeholder is a grey block on the page which can respond to drag and drop\n */\nclass PlaceHolder extends SimpleColors {\n  /**\n   * LitElement render styles\n   */\n  static get styles() {\n    return [\n      ...super.styles,\n      css`\n        :host {\n          display: block;\n          border: none;\n          transition: 0.2s all linear;\n        }\n        :host([drag-over]) {\n          border: var(--place-holder-drag-over-border, 4px dashed #2196f3);\n        }\n        .wrapper {\n          text-align: center;\n          padding: 16px;\n          color: var(--simple-colors-default-theme-grey-11, #222222);\n          background-color: var(--simple-colors-default-theme-grey-2, #eeeeee);\n        }\n        iron-icon {\n          margin: 0 auto;\n          width: 50%;\n          height: 50%;\n          display: block;\n        }\n        .text {\n          line-height: 24px;\n          font-size: 24px;\n        }\n        .directions {\n          line-height: 16px;\n          font-size: 16px;\n          font-style: italic;\n        }\n      `\n    ];\n  }\n  /**\n   * LitElement render\n   */\n  render() {\n    return html`\n      <div class=\"wrapper\">\n        <iron-icon icon=\"${this.iconFromType}\"></iron-icon>\n        <div class=\"text\">${this.calcText}</div>\n        <div class=\"directions\">${this.directions}</div>\n      </div>\n    `;\n  }\n\n  static get tag() {\n    return \"place-holder\";\n  }\n\n  static get properties() {\n    return {\n      /**\n       * calculate an icon based on the type that was used\n       */\n      iconFromType: {\n        type: String\n      },\n      /**\n       * Text place holder for describing this place holder element.\n       */\n      text: {\n        type: String\n      },\n      directions: {\n        type: String\n      },\n      /**\n       * Calculate text based on the type in the event we have no default.\n       */\n      calcText: {\n        type: String\n      },\n      /**\n       * A media type to visualize and also bubble events off of.\n       */\n      type: {\n        type: String\n      },\n      /**\n       * Bind dragging state to a variable so we can apply CSS.\n       */\n      dragOver: {\n        type: Boolean,\n        reflect: true,\n        attribute: \"drag-over\"\n      }\n    };\n  }\n  /**\n   * LitElement properties changed\n   */\n  updated(changedProperties) {\n    changedProperties.forEach((oldValue, propName) => {\n      if ([\"type\", \"dragOver\"].includes(propName)) {\n        this.iconFromType = this._getIconFromType(this.type, this.dragOver);\n      }\n      if ([\"text\", \"type\", \"dragOver\"].includes(propName)) {\n        this.calcText = this._getCalcText(this.text, this.type, this.dragOver);\n      }\n    });\n  }\n\n  /**\n   * Fire an event for things to react to above us\n   */\n  fireReplaceEvent(e) {\n    this.dispatchEvent(\n      new CustomEvent(\"place-holder-replace\", {\n        bubbles: true,\n        cancelable: true,\n        composed: true,\n        detail: this.type\n      })\n    );\n  }\n\n  /**\n   * Get the calculated text based on text being empty and type being set.\n   */\n  _getCalcText(text, type, dragOver) {\n    if (dragOver) {\n      return \"Drop file to upload\";\n    } else if (text === \"\") {\n      return \"Placeholder for \" + type;\n    } else {\n      return text;\n    }\n  }\n\n  /**\n   * Generate an icon based on the media type selected\n   * for the place holder.\n   */\n  _getIconFromType(type, dragOver) {\n    if (!dragOver) {\n      switch (type) {\n        case \"document\":\n          import(\"@polymer/iron-icons/editor-icons.js\");\n          return \"editor:insert-drive-file\";\n          break;\n        case \"audio\":\n          import(\"@polymer/iron-icons/av-icons.js\");\n          return \"av:music-video\";\n          break;\n        case \"video\":\n          import(\"@polymer/iron-icons/notification-icons.js\");\n          return \"notification:ondemand-video\";\n          break;\n        case \"image\":\n          import(\"@polymer/iron-icons/image-icons.js\");\n          return \"image:crop-original\";\n          break;\n        case \"math\":\n          import(\"@polymer/iron-icons/editor-icons.js\");\n          return \"editor:functions\";\n          break;\n        case \"text\":\n        default:\n          import(\"@polymer/iron-icons/editor-icons.js\");\n          return \"editor:format-align-left\";\n          break;\n      }\n    } else {\n      import(\"@polymer/iron-icons/iron-icons.js\");\n      // we are dragging, ignore icon\n      return \"icons:file-upload\";\n    }\n  }\n  /**\n   * HTMLElement\n   */\n  constructor() {\n    super();\n    this.text = \"\";\n    this.type = \"text\";\n    this.dragOver = false;\n    this.directions = \"Double click or drag and drop file to replace\";\n    this.addEventListener(\"dragover\", function(e) {\n      this.dragOver = true;\n      e.preventDefault();\n      e.stopPropagation();\n      this.classList.add(\"dragover\");\n    });\n    this.addEventListener(\"dragleave\", function(e) {\n      this.dragOver = false;\n      e.preventDefault();\n      e.stopPropagation();\n      this.classList.remove(\"dragover\");\n    });\n    // self bind a drop event enough though something else\n    // will need to step in and do something with this.\n    // We are just making sure that this doesn't redirect the browser.\n    this.addEventListener(\"drop\", function(e) {\n      this.dragOver = false;\n      e.preventDefault();\n      e.stopPropagation();\n      this.classList.remove(\"dragover\");\n      // this helps ensure that what gets drag and dropped is a file\n      // this prevents issues with selecting and dragging text (which triggers drag/drop)\n      // as well as compatibility with things that are legit in a draggable state\n      try {\n        if (e.dataTransfer.items[0].kind === \"file\") {\n          e.placeHolderElement = this;\n          // fire this specialized event up so things like HAX can intercept\n          this.dispatchEvent(\n            new CustomEvent(\"place-holder-file-drop\", {\n              bubbles: true,\n              cancelable: true,\n              composed: true,\n              detail: e\n            })\n          );\n        }\n      } catch (e) {}\n    });\n    this.addEventListener(\"dblclick\", this.fireReplaceEvent.bind(this));\n  }\n  /**\n   * HTMLElement\n   */\n  disconnectedCallback() {\n    this.removeEventListener(\"dragover\", function(e) {\n      this.dragOver = true;\n      e.preventDefault();\n      e.stopPropagation();\n      this.classList.add(\"dragover\");\n    });\n\n    this.removeEventListener(\"dragleave\", function(e) {\n      this.dragOver = false;\n      e.preventDefault();\n      e.stopPropagation();\n      this.classList.remove(\"dragover\");\n    });\n    // self bind a drop event enough though something else\n    // will need to step in and do something with this.\n    // We are just making sure that this doesn't redirect the browser.\n    this.removeEventListener(\"drop\", function(e) {\n      this.dragOver = false;\n      e.preventDefault();\n      e.stopPropagation();\n      this.classList.remove(\"dragover\");\n      // this helps ensure that what gets drag and dropped is a file\n      // this prevents issues with selecting and dragging text (which triggers drag/drop)\n      // as well as compatibility with things that are legit in a draggable state\n      try {\n        if (e.dataTransfer.items[0].kind === \"file\") {\n          e.placeHolderElement = this;\n          // fire this specialized event up so things like HAX can intercept\n          this.dispatchEvent(\n            new CustomEvent(\"place-holder-file-drop\", {\n              bubbles: true,\n              cancelable: true,\n              composed: true,\n              detail: e\n            })\n          );\n        }\n      } catch (e) {}\n    });\n    this.removeEventListener(\"dblclick\", this.fireReplaceEvent.bind(this));\n    super.disconnectedCallback();\n  }\n  /**\n   * HAX\n   */\n  static get haxProperties() {\n    return {\n      canScale: true,\n      canPosition: true,\n      canEditSource: false,\n      gizmo: {\n        title: \"Placeholder\",\n        description:\n          \"A place holder that can be converted into the media type that's been selected\",\n        icon: \"image:transform\",\n        color: \"grey\",\n        groups: [\"Placeholder\"],\n        handles: [],\n        meta: {\n          author: \"ELMS:LN\"\n        }\n      },\n      settings: {\n        quick: [],\n        configure: [\n          {\n            property: \"type\",\n            title: \"Type\",\n            description: \"Type of gizmo that this accepts for replacement.\",\n            inputMethod: \"select\",\n            options: {\n              text: \"Text / content\",\n              document: \"Document / file\",\n              audio: \"Audio\",\n              video: \"Video\",\n              image: \"Image\",\n              math: \"Math\"\n            }\n          },\n          {\n            property: \"text\",\n            title: \"Text\",\n            description: \"Identify the place holder desired in greater detail\",\n            inputMethod: \"textfield\",\n            required: false\n          }\n        ],\n        advanced: []\n      },\n      saveOptions: {\n        unsetAttributes: [\"icon-from-type\", \"calc-text\", \"colors\"],\n        wipeSlot: true\n      }\n    };\n  }\n}\nwindow.customElements.define(PlaceHolder.tag, PlaceHolder);\nexport { PlaceHolder };\n"],"names":["PlaceHolder","text","type","dragOver","directions","addEventListener","e","preventDefault","stopPropagation","classList","add","remove","dataTransfer","items","kind","placeHolderElement","this","dispatchEvent","CustomEvent","bubbles","cancelable","composed","detail","_this","fireReplaceEvent","bind","SimpleColors","html","iconFromType","calcText","changedProperties","forEach","oldValue","propName","includes","_this2","_getIconFromType","_getCalcText","css","String","Boolean","reflect","attribute","removeEventListener","canScale","canPosition","canEditSource","gizmo","title","description","icon","color","groups","handles","meta","author","settings","quick","configure","property","inputMethod","options","document","audio","video","image","math","required","advanced","saveOptions","unsetAttributes","wipeSlot","window","customElements","define","tag"],"mappings":"wyFAYMA,kOAqLGC,KAAO,KACPC,KAAO,SACPC,UAAW,IACXC,WAAa,kDACbC,iBAAiB,WAAY,SAASC,QACpCH,UAAW,EAChBG,EAAEC,iBACFD,EAAEE,uBACGC,UAAUC,IAAI,gBAEhBL,iBAAiB,YAAa,SAASC,QACrCH,UAAW,EAChBG,EAAEC,iBACFD,EAAEE,uBACGC,UAAUE,OAAO,gBAKnBN,iBAAiB,OAAQ,SAASC,QAChCH,UAAW,EAChBG,EAAEC,iBACFD,EAAEE,uBACGC,UAAUE,OAAO,gBAKiB,SAAjCL,EAAEM,aAAaC,MAAM,GAAGC,OAC1BR,EAAES,mBAAqBC,UAElBC,cACH,IAAIC,YAAY,yBAA0B,CACxCC,SAAS,EACTC,YAAY,EACZC,UAAU,EACVC,OAAQhB,MAId,MAAOA,SAEND,iBAAiB,WAAYkB,EAAKC,iBAAiBC,0PA/NlCC,2DA4CfC,WAEgBX,KAAKY,aACJZ,KAAKa,SACCb,KAAKZ,4CAmD7B0B,cACNA,EAAkBC,QAAQ,SAACC,EAAUC,GAC/B,CAAC,OAAQ,YAAYC,SAASD,KAChCE,EAAKP,aAAeO,EAAKC,iBAAiBD,EAAKjC,KAAMiC,EAAKhC,WAExD,CAAC,OAAQ,OAAQ,YAAY+B,SAASD,KACxCE,EAAKN,SAAWM,EAAKE,aAAaF,EAAKlC,KAAMkC,EAAKjC,KAAMiC,EAAKhC,sDAQlDG,QACVW,cACH,IAAIC,YAAY,uBAAwB,CACtCC,SAAS,EACTC,YAAY,EACZC,UAAU,EACVC,OAAQN,KAAKd,6CAQND,EAAMC,EAAMC,UACnBA,EACK,sBACW,KAATF,EACF,mBAAqBC,EAErBD,2CAQMC,EAAMC,MAChBA,gBA6BI,qCAEA,2BA9BCD,OACD,yBACI,uCACA,+BAEJ,sBACI,mCACA,qBAEJ,sBACI,6CACA,kCAEJ,sBACI,sCACA,0BAEJ,qBACI,uCACA,uBAEJ,6BAEI,uCACA,uGAhKXoC,+CA+CK,wDAIA,CAILV,aAAc,CACZ1B,KAAMqC,QAKRtC,KAAM,CACJC,KAAMqC,QAERnC,WAAY,CACVF,KAAMqC,QAKRV,SAAU,CACR3B,KAAMqC,QAKRrC,KAAM,CACJA,KAAMqC,QAKRpC,SAAU,CACRD,KAAMsC,QACNC,SAAS,EACTC,UAAW,yEAyIVC,oBAAoB,WAAY,SAASrC,QACvCH,UAAW,EAChBG,EAAEC,iBACFD,EAAEE,uBACGC,UAAUC,IAAI,mBAGhBiC,oBAAoB,YAAa,SAASrC,QACxCH,UAAW,EAChBG,EAAEC,iBACFD,EAAEE,uBACGC,UAAUE,OAAO,mBAKnBgC,oBAAoB,OAAQ,SAASrC,QACnCH,UAAW,EAChBG,EAAEC,iBACFD,EAAEE,uBACGC,UAAUE,OAAO,gBAKiB,SAAjCL,EAAEM,aAAaC,MAAM,GAAGC,OAC1BR,EAAES,mBAAqBC,UAElBC,cACH,IAAIC,YAAY,yBAA0B,CACxCC,SAAS,EACTC,YAAY,EACZC,UAAU,EACVC,OAAQhB,MAId,MAAOA,YAENqC,oBAAoB,WAAY3B,KAAKQ,iBAAiBC,KAAKT,8GAOzD,CACL4B,UAAU,EACVC,aAAa,EACbC,eAAe,EACfC,MAAO,CACLC,MAAO,cACPC,YACE,gFACFC,KAAM,kBACNC,MAAO,OACPC,OAAQ,CAAC,eACTC,QAAS,GACTC,KAAM,CACJC,OAAQ,YAGZC,SAAU,CACRC,MAAO,GACPC,UAAW,CACT,CACEC,SAAU,OACVX,MAAO,OACPC,YAAa,mDACbW,YAAa,SACbC,QAAS,CACP5D,KAAM,iBACN6D,SAAU,kBACVC,MAAO,QACPC,MAAO,QACPC,MAAO,QACPC,KAAM,SAGV,CACEP,SAAU,OACVX,MAAO,OACPC,YAAa,sDACbW,YAAa,YACbO,UAAU,IAGdC,SAAU,IAEZC,YAAa,CACXC,gBAAiB,CAAC,iBAAkB,YAAa,UACjDC,UAAU,aAKlBC,OAAOC,eAAeC,OAAO1E,EAAY2E,IAAK3E"}