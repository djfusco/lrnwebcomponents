{"version":3,"file":"portal-launcher.umd.js","sources":["portal-launcher.umd.js"],"sourcesContent":["/**\n * Copyright 2019 The Pennsylvania State University\n * @license Apache-2.0, see License.md for full text.\n */\n\n/**\n * `portal-launcher`\n * @element portal-launcher\n * `silly thing to play with portal tag and progressive enhancement`\n *\n * @microcopy - language worth noting:\n *  -\n *\n\n * @demo demo/index.html\n */\nclass PortalLauncher extends HTMLElement {\n  /**\n   * Store the tag name to make it easier to obtain directly.\n   * @notice function name must be here for tooling to operate correctly\n   */\n  static get tag() {\n    return \"portal-launcher\";\n  }\n  /**\n   * life cycle\n   */\n  constructor(delayRender = false) {\n    super();\n    // set tag for later use\n    this.tag = PortalLauncher.tag;\n    // ensure there's at least 1 link in here somewhere...\n    if (this.querySelectorAll(\"a\")) {\n      this.querySelectorAll(\"a\").forEach(a => {\n        a.addEventListener(\"click\", this.click.bind(this));\n      });\n    }\n  }\n  /**\n   * Basic feature detecting event handler\n   */\n  click(e) {\n    let target = e.target;\n    // support walking the path in order to find the link clicked\n    if (target.tagName !== \"A\") {\n      e.path.forEach(item => {\n        if (item.tagName === \"A\") {\n          target = item;\n        }\n      });\n    }\n\n    if (target && target.getAttribute(\"href\") != null) {\n      // progressive enhancement, if this class exists, can the link click\n      if (\"HTMLPortalElement\" in window) {\n        e.preventDefault();\n        e.stopPropagation();\n        e.stopImmediatePropagation();\n        // Adding some styles with transitions\n        const style = document.createElement(\"style\");\n        const initialScale = 0.2;\n        style.innerHTML = `\n          portal {\n            position:fixed;\n            width: 100%;\n            height: 100%;\n            opacity: 0;\n            box-shadow: 0 0 20px 10px #999;\n            transform: scale(${initialScale});\n            bottom: calc(20px + 50% * ${initialScale} - 50%);\n            right: calc(20px + 50% * ${initialScale} - 50%);\n            z-index: 10000;\n          }\n          .portal-transition {\n            transition:\n              transform 0.4s,\n              bottom 0.7s,\n              left 0.7s,\n              opacity 1.0s;\n          }\n          @media (prefers-reduced-motion: reduce) {\n            .portal-transition {\n              transition: all 0.001s;\n            }\n          }\n          .portal-reveal {\n            transform: scale(1.0);\n            bottom: 0px;\n            left: 0px;\n          }\n          .fade-in {\n            opacity: 1.0;\n          }\n        `;\n        const portal = document.createElement(\"portal\");\n        // Let's navigate into the WICG Portals spec page\n        portal.src = target.getAttribute(\"href\");\n        // Add a class that defines the transition. Consider using\n        // `prefers-reduced-motion` media query to control the animation.\n        // https://developers.google.com/web/updates/2019/03/prefers-reduced-motion\n        portal.classList.add(\"portal-transition\");\n        portal.addEventListener(\"transitionend\", evt => {\n          if (evt.propertyName == \"bottom\") {\n            // Activate the portal once the transition has completed\n            portal.activate();\n          }\n        });\n        document.body.append(style, portal);\n        // Waiting for the page to load.\n        // using setTimeout is a suboptimal way and it's best to fade-in\n        // when receiving a load complete message from the portal via postMessage\n        setTimeout(_ => portal.classList.add(\"fade-in\"), 250);\n        setTimeout(_ => portal.classList.add(\"portal-reveal\"), 500);\n      }\n    }\n  }\n}\nwindow.customElements.define(PortalLauncher.tag, PortalLauncher);\nexport { PortalLauncher };\n"],"names":["PortalLauncher","tag","_this","querySelectorAll","forEach","a","addEventListener","click","bind","HTMLElement","e","target","tagName","path","item","getAttribute","window","preventDefault","stopPropagation","stopImmediatePropagation","style","document","createElement","innerHTML","portal","src","classList","add","evt","propertyName","activate","body","append","setTimeout","_","customElements","define"],"mappings":"wqDAgBMA,kOAcGC,IAAMD,EAAeC,IAEtBC,EAAKC,iBAAiB,QACnBA,iBAAiB,KAAKC,QAAQ,SAAAC,GACjCA,EAAEC,iBAAiB,QAASJ,EAAKK,MAAMC,8PAlBlBC,wDAMlB,uDAmBHC,OACAC,EAASD,EAAEC,UAEQ,MAAnBA,EAAOC,SACTF,EAAEG,KAAKT,QAAQ,SAAAU,GACQ,MAAjBA,EAAKF,UACPD,EAASG,KAKXH,GAAyC,MAA/BA,EAAOI,aAAa,SAE5B,sBAAuBC,OAAQ,CACjCN,EAAEO,iBACFP,EAAEQ,kBACFR,EAAES,+BAEIC,EAAQC,SAASC,cAAc,SAErCF,EAAMG,+NADe,wDAAA,6DAAA,slBAkCfC,EAASH,SAASC,cAAc,UAEtCE,EAAOC,IAAMd,EAAOI,aAAa,QAIjCS,EAAOE,UAAUC,IAAI,qBACrBH,EAAOlB,iBAAiB,gBAAiB,SAAAsB,GACf,UAApBA,EAAIC,cAENL,EAAOM,aAGXT,SAASU,KAAKC,OAAOZ,EAAOI,GAI5BS,WAAW,SAAAC,UAAKV,EAAOE,UAAUC,IAAI,YAAY,KACjDM,WAAW,SAAAC,UAAKV,EAAOE,UAAUC,IAAI,kBAAkB,eAK/DX,OAAOmB,eAAeC,OAAOpC,EAAeC,IAAKD"}