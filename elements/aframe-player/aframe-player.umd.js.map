{"version":3,"file":"aframe-player.umd.js","sources":["aframe-player.umd.js"],"sourcesContent":["/**\n * Copyright 2018 The Pennsylvania State University\n * @license Apache-2.0, see License.md for full text.\n */\nimport { LitElement, html, css } from \"lit-element/lit-element.js\";\nimport { SchemaBehaviors } from \"@lrnwebcomponents/schema-behaviors/schema-behaviors.js\";\nimport \"@lrnwebcomponents/es-global-bridge/es-global-bridge.js\";\n/**\n * `aframe-player`\n * `A wrapper to do data binding into aframe`\n *\n * @demo demo/index.html\n * @element aframe-player\n */\nclass AframePlayer extends SchemaBehaviors(LitElement) {\n  /**\n   * LitElement constructable styles enhancement\n   */\n  static get styles() {\n    return [\n      css`\n        :host {\n          display: block;\n          position: relative;\n        }\n        .a-hidden {\n          display: hidden;\n        }\n      `\n    ];\n  }\n  render() {\n    return html`\n      <a-scene\n        id=\"scene\"\n        class=\"embedded\"\n        embedded\n        ?arjs=\"${this.ar}\"\n        style=\"height:${this.height};width:${this.width};\"\n      >\n        <a-sky color=\"${this.skyColor}\"></a-sky>\n        <a-marker-camera preset=\"hiro\"></a-marker-camera>\n      </a-scene>\n    `;\n  }\n\n  static get tag() {\n    return \"aframe-player\";\n  }\n  constructor() {\n    super();\n    this.course = \"\";\n    this.height = \"480px\";\n    this.width = \"640px\";\n    this.skyColor = \"#DCDCDC\";\n    this.ar = false;\n    this.x = \"0\";\n    this.y = \"0\";\n    this.z = \"0\";\n    this.position = {};\n  }\n  updated(changedProperties) {\n    changedProperties.forEach((oldValue, propName) => {\n      if ([\"x\", \"y\", \"z\", \"width\", \"height\"].includes(propName)) {\n        this.position = this._computePosition(\n          this.x,\n          this.y,\n          this.z,\n          this.width,\n          this.height\n        );\n      }\n      if (propName == \"position\") {\n        this._positionChanged(this[propName]);\n      }\n    });\n  }\n  static get properties() {\n    return {\n      ...super.properties,\n      /**\n       * Source to reference for the 3D object\n       */\n      source: {\n        type: String\n      },\n      /**\n       * height of the element\n       */\n      height: {\n        type: String\n      },\n      /**\n       * width of the element\n       */\n      width: {\n        type: String\n      },\n      /**\n       * Color of the sky / background.\n       */\n      skyColor: {\n        type: String,\n        attribute: \"sky-color\"\n      },\n      /**\n       * If this is for augmented reality or not.\n       */\n      ar: {\n        type: Boolean\n      },\n      /**\n       * x position for the AR element.\n       */\n      x: {\n        type: String\n      },\n      /**\n       * y position for the AR element.\n       */\n      y: {\n        type: String\n      },\n      /**\n       * z position for the AR element.\n       */\n      z: {\n        type: String\n      },\n      /**\n       * Generate a position object when coordinates change.\n       */\n      position: {\n        type: Object\n      }\n    };\n  }\n  createRenderRoot() {\n    return this;\n  }\n  disconnectedCallback() {\n    window.removeEventListener(\n      \"es-bridge-aframePlayer-loaded\",\n      this._aframeLoaded.bind(this)\n    );\n    super.disconnectedCallback();\n  }\n  static get haxProperties() {\n    return {\n      canScale: false,\n      canPosition: false,\n      canEditSource: false,\n      gizmo: {\n        title: \"3D player\",\n        description: \"A 3D file / augmented reality player.\",\n        icon: \"av:play-circle-filled\",\n        color: \"amber\",\n        groups: [\"3D\", \"Augmented reality\"],\n        handles: [\n          {\n            type: \"3d\",\n            source: \"source\"\n          }\n        ],\n        meta: {\n          author: \"ELMS:LN\"\n        }\n      },\n      settings: {\n        quick: [\n          {\n            property: \"height\",\n            title: \"height\",\n            description: \"height of the object\",\n            inputMethod: \"textfield\",\n            type: \"bar\",\n            icon: \"image:photo-size-select-small\",\n            required: true\n          },\n          {\n            property: \"width\",\n            title: \"Width\",\n            description: \"Width of the object\",\n            inputMethod: \"textfield\",\n            type: \"bar\",\n            icon: \"image:straighten\",\n            required: true\n          }\n        ],\n        configure: [\n          {\n            property: \"source\",\n            title: \"Source\",\n            description: \"The URL for this AR file.\",\n            inputMethod: \"textfield\",\n            type: \"bar\",\n            icon: \"link\",\n            required: true\n          },\n          {\n            property: \"x\",\n            title: \"X\",\n            description: \"X position of the element in AR.\",\n            inputMethod: \"textfield\",\n            type: \"bar\",\n            icon: \"communication:location-on\",\n            required: true\n          },\n          {\n            property: \"y\",\n            title: \"Y\",\n            description: \"Y position of the element in AR.\",\n            inputMethod: \"textfield\",\n            type: \"bar\",\n            icon: \"communication:location-on\",\n            required: true\n          },\n          {\n            property: \"z\",\n            title: \"Z\",\n            description: \"Z position of the element in AR.\",\n            inputMethod: \"textfield\",\n            type: \"bar\",\n            icon: \"communication:location-on\",\n            required: true\n          },\n          {\n            property: \"skyColor\",\n            title: \"Sky color\",\n            description: \"Select the color of the sky in the scene.\",\n            inputMethod: \"colorpicker\",\n            type: \"bar\",\n            icon: \"editor:format-color-fill\"\n          }\n        ],\n        advanced: []\n      }\n    };\n  }\n  /**\n   * Attached.\n   */\n  connectedCallback() {\n    super.connectedCallback();\n    let location = \"https://aframe.io/releases/0.9.2/aframe.min.js\";\n    if (typeof TWEEN === \"object\") this._aframeLoaded.bind(this);\n    window.addEventListener(\n      \"es-bridge-aframePlayer-loaded\",\n      this._aframeLoaded.bind(this)\n    );\n    window.ESGlobalBridge.requestAvailability();\n    window.ESGlobalBridge.instance.load(\"aframePlayer\", location);\n  }\n\n  _aframeLoaded(el) {\n    // ensure that this doesn't put full screen styles on the page!\n    this.querySelector(\"#scene\").removeFullScreenStyles();\n    this.__entity = document.createElement(\"a-entity\");\n    this.__entity.setAttribute(\"gltf-model\", \"url(\" + this.source + \")\");\n    this._positionChanged(this.position);\n    this.querySelector(\"#scene\").appendChild(this.__entity);\n  }\n\n  /**\n   * Generate position object based on format a-frame expects.\n   */\n  _computePosition(x, y, z, width, height) {\n    return {\n      x: x,\n      y: y,\n      z: z\n    };\n  }\n\n  /**\n   * When position is updated, inject this into a-frame tag.\n   */\n  _positionChanged(position) {\n    if (this.__entity !== undefined)\n      this.__entity.setAttribute(\"position\", position);\n  }\n}\nwindow.customElements.define(AframePlayer.tag, AframePlayer);\nexport { AframePlayer };\n"],"names":["AframePlayer","course","height","width","skyColor","ar","x","y","z","position","SchemaBehaviors","LitElement","html","this","css","changedProperties","forEach","oldValue","propName","includes","_this2","_computePosition","_positionChanged","window","removeEventListener","_aframeLoaded","bind","TWEEN","addEventListener","ESGlobalBridge","requestAvailability","instance","load","el","querySelector","removeFullScreenStyles","__entity","document","createElement","setAttribute","source","appendChild","undefined","type","String","attribute","Boolean","Object","canScale","canPosition","canEditSource","gizmo","title","description","icon","color","groups","handles","meta","author","settings","quick","property","inputMethod","required","configure","advanced","customElements","define","tag"],"mappings":"4pFAcMA,yKAqCGC,OAAS,KACTC,OAAS,UACTC,MAAQ,UACRC,SAAW,YACXC,IAAK,IACLC,EAAI,MACJC,EAAI,MACJC,EAAI,MACJC,SAAW,iPA7COC,kBAAgBC,0DAkBhCC,WAKMC,KAAKR,GACEQ,KAAKX,OAAgBW,KAAKV,MAE1BU,KAAKT,iDArBlB,CACLU,8CA2BK,uDAcDC,cACNA,EAAkBC,QAAQ,SAACC,EAAUC,GAC/B,CAAC,IAAK,IAAK,IAAK,QAAS,UAAUC,SAASD,KAC9CE,EAAKX,SAAWW,EAAKC,iBACnBD,EAAKd,EACLc,EAAKb,EACLa,EAAKZ,EACLY,EAAKjB,MACLiB,EAAKlB,SAGO,YAAZgB,GACFE,EAAKE,iBAAiBF,EAAKF,wDAiExBL,oDAGPU,OAAOC,oBACL,gCACAX,KAAKY,cAAcC,KAAKb,kKAsGL,gCAAVc,oBAAAA,SAAoBd,KAAKY,cAAcC,KAAKb,MACvDU,OAAOK,iBACL,gCACAf,KAAKY,cAAcC,KAAKb,OAE1BU,OAAOM,eAAeC,sBACtBP,OAAOM,eAAeE,SAASC,KAAK,eAPrB,wFAUHC,QAEPC,cAAc,UAAUC,8BACxBC,SAAWC,SAASC,cAAc,iBAClCF,SAASG,aAAa,aAAc,OAAS1B,KAAK2B,OAAS,UAC3DlB,iBAAiBT,KAAKJ,eACtByB,cAAc,UAAUO,YAAY5B,KAAKuB,mDAM/B9B,EAAGC,EAAGC,EAAGL,EAAOD,SACxB,CACLI,EAAGA,EACHC,EAAGA,EACHC,EAAGA,4CAOUC,QACOiC,IAAlB7B,KAAKuB,UACPvB,KAAKuB,SAASG,aAAa,WAAY9B,yaApMvC+B,OAAQ,CACNG,KAAMC,QAKR1C,OAAQ,CACNyC,KAAMC,QAKRzC,MAAO,CACLwC,KAAMC,QAKRxC,SAAU,CACRuC,KAAMC,OACNC,UAAW,aAKbxC,GAAI,CACFsC,KAAMG,SAKRxC,EAAG,CACDqC,KAAMC,QAKRrC,EAAG,CACDoC,KAAMC,QAKRpC,EAAG,CACDmC,KAAMC,QAKRnC,SAAU,CACRkC,KAAMI,sDAeH,CACLC,UAAU,EACVC,aAAa,EACbC,eAAe,EACfC,MAAO,CACLC,MAAO,YACPC,YAAa,wCACbC,KAAM,wBACNC,MAAO,QACPC,OAAQ,CAAC,KAAM,qBACfC,QAAS,CACP,CACEd,KAAM,KACNH,OAAQ,WAGZkB,KAAM,CACJC,OAAQ,YAGZC,SAAU,CACRC,MAAO,CACL,CACEC,SAAU,SACVV,MAAO,SACPC,YAAa,uBACbU,YAAa,YACbpB,KAAM,MACNW,KAAM,gCACNU,UAAU,GAEZ,CACEF,SAAU,QACVV,MAAO,QACPC,YAAa,sBACbU,YAAa,YACbpB,KAAM,MACNW,KAAM,mBACNU,UAAU,IAGdC,UAAW,CACT,CACEH,SAAU,SACVV,MAAO,SACPC,YAAa,4BACbU,YAAa,YACbpB,KAAM,MACNW,KAAM,OACNU,UAAU,GAEZ,CACEF,SAAU,IACVV,MAAO,IACPC,YAAa,mCACbU,YAAa,YACbpB,KAAM,MACNW,KAAM,4BACNU,UAAU,GAEZ,CACEF,SAAU,IACVV,MAAO,IACPC,YAAa,mCACbU,YAAa,YACbpB,KAAM,MACNW,KAAM,4BACNU,UAAU,GAEZ,CACEF,SAAU,IACVV,MAAO,IACPC,YAAa,mCACbU,YAAa,YACbpB,KAAM,MACNW,KAAM,4BACNU,UAAU,GAEZ,CACEF,SAAU,WACVV,MAAO,YACPC,YAAa,4CACbU,YAAa,cACbpB,KAAM,MACNW,KAAM,6BAGVY,SAAU,cA+ClB3C,OAAO4C,eAAeC,OAAOpE,EAAaqE,IAAKrE"}