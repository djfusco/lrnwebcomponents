{"version":3,"file":"relative-heading.umd.js","sources":["lib/relative-heading-state-manager.js","lib/relative-heading-lite.js","relative-heading.umd.js"],"sourcesContent":["import { LitElement, html, css } from \"lit-element/lit-element.js\";\n/**\n * Copyright 2019 The Pennsylvania State University\n * @license Apache-2.0, see License.md for full text.\n */\n\n// register globally so we can make sure there is only one\nwindow.RelativeHeadingStateManager = window.RelativeHeadingStateManager || {};\n// request if this exists. This helps invoke the element existing in the dom\n// as well as that there is only one of them. That way we can ensure everything\n// is rendered through the same modal\nwindow.RelativeHeadingStateManager.requestAvailability = () => {\n  if (!window.RelativeHeadingStateManager.instance) {\n    window.RelativeHeadingStateManager.instance = document.createElement(\n      \"relative-heading-state-manager\"\n    );\n    document.body.appendChild(window.RelativeHeadingStateManager.instance);\n  }\n  return window.RelativeHeadingStateManager.instance;\n};\n/**\n * `relative-heading-state-manager`\n * ` A utility that determines headings relative to their parents.`\n * @element relative-heading-state-manager\n *\n * @microcopy - language worth noting:\n *  -\n *\n\n * @polymer\n */\nclass RelativeHeadingStateManager extends LitElement {\n  /**\n   * Store the tag name to make it easier to obtain directly.\n   */\n  static get tag() {\n    return \"relative-heading-state-manager\";\n  }\n\n  // properties available to the custom element for data binding\n  static get properties() {\n    return {\n      ...super.properties,\n\n      /**\n       * icon for copy link's toast's close button\n       */\n      closeIcon: {\n        type: String\n      },\n      /**\n       * label for copy link's toast's close button\n       */\n      closeLabel: {\n        type: String\n      },\n      /**\n       * active heading for copying link\n       */\n      copyHeading: {\n        type: Object\n      },\n      /**\n       * message for copy link's toast\n       */\n      copyMessage: {\n        type: String\n      },\n      /**\n       * Stores an array of all the players on the page.\n       */\n      headings: {\n        type: Object\n      },\n      /**\n       * indicates is toast is already imported for copy link feature\n       */\n      usesCopyLink: {\n        type: Boolean\n      }\n    };\n  }\n\n  /**\n   * Makes sure there is a utility ready and listening for elements.\n   */\n  constructor() {\n    super();\n    this.closeIcon = \"close\";\n    this.closeLabel = \"Close\";\n    this.copyMessage = \"Copied to Clipboard\";\n    this.headings = [];\n    this.copyHeading = {};\n    this.usesCopyLink = false;\n    // sets the instance to the current instance\n    if (!window.RelativeHeadingStateManager.instance)\n      window.RelativeHeadingStateManager.instance = this;\n  }\n  static get styles() {\n    return [\n      css`\n        paper-toast:not(:defined) {\n          display: none;\n        }\n      `\n    ];\n  }\n\n  render() {\n    return html`\n      <paper-toast\n        id=\"relative-heading-toast\"\n        duration=\"5000\"\n        ?hidden=\"${!this.usesCopyLink}\"\n        ?disabled=\"${!this.usesCopyLink}\"\n        text=\"${this.copyHeading.copyMessage || this.copyMessage}: ${this\n          .copyUrl}\"\n      >\n        <paper-icon-button\n          icon=\"${this.copyHeading.closeIcon || this.closeIcon}\"\n          label=\"${this.copyHeading.closeLabel || this.closeLabel}\"\n          title=\"${this.copyHeading.closeLabel || this.closeLabel}\"\n          @click=\"${this.closeCopyLink}\"\n        ></paper-icon-button>\n      </paper-toast>\n    `;\n  }\n\n  /**\n   * gets URL to be copied\n   * @readonly\n   * @returns {string}\n   */\n  get copyUrl() {\n    return `${window.location.href.replace(window.location.hash, \"\")}#${\n      this.copyHeading && this.copyHeading.id ? this.copyHeading.id : \"\"\n    }`;\n  }\n\n  /**\n   * imports toast if needed and not already loaded\n   */\n  useCopyLink() {\n    if (!this.usesCopyLink) {\n      this.usesCopyLink = true;\n      import(\"@polymer/iron-icons/iron-icons.js\");\n      import(\"@polymer/paper-icon-button/paper-icon-button.js\");\n      import(\"@polymer/paper-toast/paper-toast.js\");\n    }\n  }\n\n  /**\n   * handles copying the share link\n   * @param {object} active heading\n   */\n  copyLink(heading) {\n    this.copyHeading = heading;\n    let el = document.createElement(\"textarea\");\n    el.value = this.copyUrl;\n    document.body.appendChild(el);\n    el.select();\n    document.execCommand(\"copy\");\n    document.body.removeChild(el);\n    if (\n      this.shadowRoot.querySelector(\"#relative-heading-toast\") &&\n      this.shadowRoot.querySelector(\"#relative-heading-toast\").open\n    )\n      this.shadowRoot.querySelector(\"#relative-heading-toast\").open();\n  }\n\n  /**\n   * handles closing link toast\n   */\n  closeCopyLink() {\n    if (\n      this.shadowRoot.querySelector(\"#relative-heading-toast\") &&\n      this.shadowRoot.querySelector(\"#relative-heading-toast\").close\n    )\n      this.shadowRoot.querySelector(\"#relative-heading-toast\").close();\n  }\n\n  /**\n   * adds heading to manager data\n   * @param {object} heading to be added\n   */\n  addHeading(heading) {\n    if (heading) {\n      this.addSubhead(heading);\n      this.setHeading(heading.id, heading);\n      this.updateLevel(heading);\n    }\n  }\n\n  /**\n   * adds heading from manager data\n   * @param {object} heading to be removed\n   */\n  removeHeading(heading) {\n    if (heading) {\n      if (heading.id && this.headings[heading.id]) {\n        this.headings[heading.id].heading = null;\n        this.headings[heading.id].subheads.forEach(subhead =>\n          this.updateLevel(subhead)\n        );\n      }\n      this.removeSubhead(heading.parent, heading);\n    }\n  }\n\n  /**\n   * updates heading id in manager data\n   * @param {object} heading to be updated\n   * @param {string} old heading id\n   */\n  updateId(heading, old = null) {\n    if (heading) {\n      if (old) this.setHeading(old, null);\n      this.setHeading(heading.id, heading);\n    }\n  }\n\n  /**\n   * updates heading parent id in manager data\n   * @param {object} heading to be updated\n   * @param {string} old heading parent\n   */\n  updateParent(heading, old = null) {\n    if (heading) {\n      if (old) this.removeSubhead(old, heading);\n      this.addSubhead(heading);\n    }\n  }\n\n  /**\n   * updates heading level based on default level\n   * @param {object} heading to be updated\n   */\n  updateDefaultLevel(heading, old = null) {\n    if (heading) this.updateLevel(heading);\n  }\n\n  /**\n   * adds heading to subhead data\n   * @param {object} heading to be added\n   */\n  addSubhead(heading) {\n    if (heading) {\n      if (heading.parent) {\n        if (!this.headings[heading.parent])\n          this.headings[heading.parent] = {\n            heading: null,\n            subheads: []\n          };\n        if (!this.headings[heading.parent].subheads.includes(heading))\n          this.headings[heading.parent].subheads.push(heading);\n      }\n      this.updateLevel(heading);\n    }\n  }\n\n  /**\n   * removes heading from subhead data\n   * @param {string} id to be updated\n   * @param {object} heading to be removed\n   */\n  removeSubhead(id, heading) {\n    if (id && this.headings[id] && this.headings[id].subheads) {\n      this.headings[id].subheads = this.headings[id].subheads.filter(\n        subhead => subhead != heading\n      );\n    }\n  }\n\n  /**\n   * sets manager's heading data\n   * @param {string} id to be updated\n   * @param {object} heading to be set\n   */\n  setHeading(id, heading) {\n    if (id) {\n      if (!this.headings[id])\n        this.headings[id] = {\n          heading: null,\n          subheads: []\n        };\n      this.headings[id].heading = heading;\n    }\n  }\n\n  /**\n   * updates heading level\n   * @param {object} heading to be updated\n   */\n  updateLevel(heading) {\n    if (heading) {\n      let parent =\n          heading.parent && this.headings[heading.parent].heading\n            ? parseInt(this.headings[heading.parent].heading.__level)\n            : null,\n        plevel = parent ? Math.min(6, Math.max(parent + 1, 1)) : null,\n        level = plevel ? plevel : heading.defaultLevel;\n      heading._setLevel(level);\n      if (this.headings[heading.id])\n        this.headings[heading.id].subheads.forEach(subhead =>\n          this.updateLevel(subhead)\n        );\n    }\n  }\n}\nwindow.customElements.define(\n  RelativeHeadingStateManager.tag,\n  RelativeHeadingStateManager\n);\nexport { RelativeHeadingStateManager };\n","/**\n * Copyright 2019 The Pennsylvania State University\n * @license Apache-2.0, see License.md for full text.\n */\nimport { LitElement, html, css } from \"lit-element/lit-element.js\";\nimport \"./relative-heading-state-manager.js\";\n/**\n * `relative-heading-lite`\n * `outputs the correct heading hierarchy based on parent heading`\n *\n * @demo demo/lite.html\n * @element relative-heading-lite\n */\nclass RelativeHeadingLite extends LitElement {\n  //styles function\n  static get styles() {\n    return [\n      css`\n        :host {\n          display: block;\n        }\n        :host([hidden]) {\n          display: none;\n        }\n      `\n    ];\n  }\n  // render function\n  render() {\n    return this.template;\n  }\n  // properties available to the custom element for data binding\n  static get properties() {\n    return {\n      ...super.properties,\n\n      /**\n       * The default heading level (1-6),\n       * eg., 1 for <h1>, if there  is no parent.\n       */\n      defaultLevel: {\n        type: Number,\n        attribute: \"default-level\",\n        reflect: true\n      },\n      /**\n       * The relative-heading's UUID.\n       */\n      id: {\n        type: String,\n        attribute: \"id\",\n        reflect: true\n      },\n      /**\n       * The parent relative-heading's UUID.\n       */\n      parent: {\n        type: String,\n        attribute: \"parent\",\n        reflect: true\n      },\n      /**\n       * The parent relative-heading's UUID.\n       */\n      __level: {\n        type: Number,\n        attribute: \"level\",\n        reflect: true\n      }\n    };\n  }\n\n  /**\n   * Store the tag name to make it easier to obtain directly.\n   * @notice function name must be here for tooling to operate correctly\n   */\n  static get tag() {\n    return \"relative-heading-lite\";\n  }\n\n  get template() {\n    return html`\n      <slot></slot>\n    `;\n  }\n\n  /**\n   * Makes sure there is a utility ready and listening for elements.\n   */\n  constructor() {\n    super();\n    this.parent = null;\n    this.checkId();\n    this.__level = this.querySelector(\"h1,h2,h3,h4,h5,h6\")\n      ? parseInt(\n          this.querySelector(\"h1,h2,h3,h4,h5,h6\").tagName.replace(/\\D/, \"\")\n        )\n      : 1;\n    this.defaultLevel = 1;\n  }\n\n  /**\n   * life cycle, element is added to the DOM\n   */\n  connectedCallback() {\n    super.connectedCallback();\n    this.manager.addHeading(this);\n    this.observer.observe(this, { childList: true });\n  }\n\n  /**\n   * returns mutation observer\n   * @readonly\n   * @returns {object} MutationObserver to unwrap contents\n   */\n  get observer() {\n    let unwrap = () => this.updateContents();\n    return new MutationObserver(unwrap);\n  }\n\n  /**\n   * returns state manager\n   * @readonly\n   * @returns {object} window.RelativeHeadingStateManager instance\n   */\n  get manager() {\n    return window.RelativeHeadingStateManager.requestAvailability();\n  }\n\n  /**\n   * ensures that id is not blank\n   */\n  checkId() {\n    this.id = this.id || `heading-${this._generateUUID()}`;\n  }\n\n  /**\n   * @param {map} changedProperties the properties that have changed\n   */\n  updated(changedProperties) {\n    changedProperties.forEach((oldValue, propName) => {\n      if (propName === \"defaultLevel\") {\n        if (\n          !this.defaultLevel ||\n          this.defaultLevel < 1 ||\n          this.defaultLevel > 6\n        )\n          this.defaultLevel = Math.min(0, Math.max(this.defaultLevel, 6));\n        this.manager.updateDefaultLevel(this, oldValue);\n      }\n      if (propName === \"id\") {\n        if (!this.id) this.checkId();\n        this.manager.updateId(this, oldValue);\n      }\n      if (propName === \"parent\") this.manager.updateParent(this, oldValue);\n      if (propName === \"__level\") {\n        this.observer.disconnect();\n        this.updateContents();\n        this.observer.observe(this, { childList: true });\n      }\n    });\n  }\n\n  /**\n   * sets the heading level\n   * @param {number} level of heading\n   */\n  _setLevel(level) {\n    if (this.__level !== level) this.__level = level;\n  }\n\n  /**\n   * unwraps tags on slotted content\n   */\n  updateContents() {\n    if (!this.querySelector(`h${this.__level}`) || this.children > 0) {\n      this.innerHTML = `<h${this.__level}>${\n        this.children && this.children[0]\n          ? this.children[0].innerHTML\n          : this.textContent\n      }</h${this.__level}>`;\n    }\n  }\n\n  /**\n   * generates a unique id\n   * @returns {string } unique id\n   */\n  _generateUUID() {\n    return \"ss-s-s-s-sss\".replace(\n      /s/g,\n      Math.floor((1 + Math.random()) * 0x10000)\n        .toString(16)\n        .substring(1)\n    );\n  }\n\n  /**\n   * life cycle, element is removed from the DOM\n   */\n  disconnectedCallback() {\n    this.observer.disconnect();\n    this.manager.removeHeading(this);\n    super.disconnectedCallback();\n  }\n}\nwindow.customElements.define(RelativeHeadingLite.tag, RelativeHeadingLite);\nexport { RelativeHeadingLite };\n","/**\n * Copyright 2019 The Pennsylvania State University\n * @license Apache-2.0, see License.md for full text.\n */\nimport { LitElement, html, css } from \"lit-element/lit-element.js\";\nimport { RelativeHeadingLite } from \"./lib/relative-heading-lite.js\";\nimport \"@lrnwebcomponents/anchor-behaviors/anchor-behaviors.js\";\n\n/**\n * `relative-heading`\n * `outputs the correct heading hierarchy based on parent heading`\n *\n * @demo demo/index.html\n * @demo demo/nolinks.html Disable Links\n * @demo demo/rightalign.html Right-Align Links\n * @element relative-heading\n */\nclass RelativeHeading extends RelativeHeadingLite {\n  \n  //styles function\n  static get styles() {\n    return  [\n      \n      css`\n:host {\n  display: flex;\n  flex-wrap: var(--relative-heading-wrap,wrap);\n  align-items: var(--relative-heading-align,center);\n  justify-content: flex-start;\n}\n\n:host([hidden]) {\n  display: none;\n}\n\n::slotted(*) {\n  flex: 0 0 auto;\n}\n\n:host([link-align-right]){\n  justify-content: space-between;\n}\n\n:host([link-align-right]) ::slotted(*) {\n  flex: 1 1 auto;\n}\n\n:host > paper-icon-button:not(:defined) {\n  opacity: 0;\n}\n\n:host > paper-icon-button {\n  flex: 0 0 auto;\n}\n\npaper-icon-button {\n  color: var(--relative-heading-button-color, #666);\n  background: var(--relative-heading-button-bg);\n  border: var(--relative-heading-button-border);\n  outline: var(--relative-heading-button-outline);\n  margin: var(--relative-heading-button-margin,0 0 0 8px);\n  padding: var(--relative-heading-button-padding, 8px);\n  opacity: var(--relative-heading-button-opacity, 0);\n  transition: var(--relative-heading-button-transition, all 0.5s);\n}\n\n:host([link-align-right]) paper-icon-button,\n:host(:not([link-align-right]):focus) paper-icon-button,\n:host(:not([link-align-right]):focus-within) paper-icon-button,\n:host(:not([link-align-right]):hover) paper-icon-button {\n  opacity: var(--relative-heading-button-active-opacity, 1);\n}\n\npaper-icon-button:focus-within,\npaper-icon-button:focus,\npaper-icon-button:hover {\n  color: var(--relative-heading-button-focus-color, #000);\n  background: var(--relative-heading-button-focus-bg);\n  border: var(--relative-heading-button-focus-border);\n  outline: var(--relative-heading-button-focus-outline);\n  opacity: var(--relative-heading-button-focus-opacity, 1);\n}\n      `\n    ];\n  }\n  // render function\n  render() {\n    return html`\n\n${this.template}\n${this.button}`;\n  }\n\n  // haxProperty definition\n  static get haxProperties() {\n    return {\n  \"canScale\": true,\n  \"canPosition\": true,\n  \"canEditSource\": false,\n  \"gizmo\": {\n    \"title\": \"Relative heading\",\n    \"description\": \"outputs the correct heading hierarchy based on parent's heading\",\n    \"icon\": \"icons:android\",\n    \"color\": \"green\",\n    \"groups\": [\"Heading\"],\n    \"handles\": [\n      {\n        \"type\": \"todo:read-the-docs-for-usage\"\n      }\n    ],\n    \"meta\": {\n      \"author\": \"nikkimk\",\n      \"owner\": \"The Pennsylvania State University\"\n    }\n  },\n  \"settings\": {\n    \"quick\": [],\n    \"configure\": [\n      {\n        \"property\": \"parent\",\n        \"description\": \"Parent Heading's Resource ID\",\n        \"inputMethod\": \"textfield\",\n        \"required\": false\n      },\n      {\n        \"property\": \"disableLink\",\n        \"description\": \"Disables link button feature.\",\n        \"inputMethod\": \"boolean\",\n        \"required\": false\n      },\n      {\n        \"property\": \"linkAlignRight\",\n        \"description\": \"Aligns copy link button to far right of heading.\",\n        \"inputMethod\": \"boolean\",\n        \"required\": false\n      }\n    ],\n    \"advanced\": [\n      {\n        \"property\": \"defaultLevel\",\n        \"description\": \"Heading level if parent is not found.\",\n        \"inputMethod\": \"number\",\n        \"required\": false\n      },\n      {\n        \"property\": \"copyMessage\",\n        \"description\": \"Overrides default text for copy link's toast message.\",\n        \"inputMethod\": \"textfield\",\n        \"required\": false\n      },\n      {\n        \"property\": \"linkLabel\",\n        \"description\": \"Overrides default label copy link button.\",\n        \"inputMethod\": \"textfield\",\n        \"required\": false\n      },\n      {\n        \"property\": \"linkIcon\",\n        \"description\": \"Overrides default icon copy link button.\",\n        \"inputMethod\": \"iconpicker\",\n        \"required\": false\n      },\n      {\n        \"property\": \"closeLabel\",\n        \"description\": \"Overrides default label for copy link's toast's close button.\",\n        \"inputMethod\": \"textfield\",\n        \"required\": false\n      },\n      {\n        \"property\": \"closeIcon\",\n        \"description\": \"Overrides default icon for copy link's toast's close button.\",\n        \"inputMethod\": \"iconpicker\",\n        \"required\": false\n      }\n    ]\n  }\n}\n;\n  }\n  // properties available to the custom element for data binding\n    static get properties() {\n    return {\n  \n  ...super.properties,\n  \n  /**\n   * overrides state manager's default icon for copy link's toast's close button\n   */\n  \"closeIcon\": {\n    \"type\": String\n  },\n  /**\n   * overrides state manager's default label for copy link's toast's close button\n   */\n  \"closeLabel\": {\n    \"type\": String\n  },\n  /**\n   * overrides state manager's default message for copy link's toast\n   */\n  \"copyMessage\": {\n    \"type\": String\n  },\n  /**\n   * The relative-heading resource's UUID.\n   */\n  \"disableLink\": {\n    \"type\": Boolean,\n    \"attribute\": \"disable-link\"\n  },\n  /**\n   * label for copy link's button\n   */\n  \"linkAlignRight\": {\n    \"type\": Boolean,\n    \"attribute\": \"link-align-right\",\n    \"reflect\": true\n  },\n  /**\n   * icon for copy link's button\n   */\n  \"linkIcon\": {\n    \"type\": String\n  },\n  /**\n   * label for copy link's button\n   */\n  \"linkLabel\": {\n    \"type\": String\n  }\n}\n;\n  }\n\n  /**\n   * Store the tag name to make it easier to obtain directly.\n   * @notice function name must be here for tooling to operate correctly\n   */\n  static get tag() {\n    return \"relative-heading\";\n  }\n\n  /**\n   * Makes sure there is a utility ready and listening for elements.\n   */\n  constructor() {\n    super();\n    this.linkAlignRight = false;\n    this.disableLink = false;\n    this.linkIcon = \"link\";\n    this.linkLabel = \"Get link\";\n    import(\"@polymer/iron-icons/iron-icons.js\");\n    import(\"@polymer/paper-icon-button/paper-icon-button.js\");\n  }\n\n  connectedCallback() {\n    super.connectedCallback();\n    if (!this.disableLink) this.manager.useCopyLink();\n  }\n\n  /**\n   * gets whether heading is currently anchored\n   * @readonly\n   * @returns {boolean}\n   */\n  get anchored() {\n    return window.AnchorBehaviors && window.AnchorBehaviors.getTarget\n      ? window.AnchorBehaviors.getTarget(this)\n      : false;\n  }\n\n  get button() {\n    console.log(this.disableLink);\n    return this.disableLink\n      ? html``\n      : html`\n          <paper-icon-button\n            controls=\"relative-heading-toast\"\n            .aria-describedby=\"${this.id}\"\n            .icon=\"${this.linkIcon}\"\n            .title=\"${this.linkLabel}\"\n            ?hidden=\"${this.disableLink}\"\n            ?disabled=\"${this.disableLink}\"\n            @click=\"${this._handleCopyClick}\"\n          >\n          </paper-icon-button>\n        `;\n  }\n  _handleCopyClick() {\n    if (!this.disableLink && this.manager && this.manager.copyLink)\n      this.manager.copyLink(this);\n  }\n}\nwindow.customElements.define(RelativeHeading.tag, RelativeHeading);\nexport { RelativeHeading };\n"],"names":["window","RelativeHeadingStateManager","requestAvailability","instance","document","createElement","body","appendChild","closeIcon","closeLabel","copyMessage","headings","copyHeading","usesCopyLink","LitElement","type","String","Object","Boolean","html","this","copyUrl","closeCopyLink","heading","el","value","select","execCommand","removeChild","shadowRoot","querySelector","open","close","addSubhead","setHeading","id","updateLevel","subheads","forEach","subhead","_this2","removeSubhead","parent","old","includes","push","filter","parseInt","__level","plevel","Math","min","max","level","defaultLevel","_setLevel","_this3","location","href","replace","hash","css","customElements","define","tag","RelativeHeadingLite","checkId","_this","tagName","template","Number","attribute","reflect","manager","addHeading","observer","observe","childList","_generateUUID","changedProperties","oldValue","propName","updateDefaultLevel","updateId","updateParent","disconnect","updateContents","children","innerHTML","textContent","floor","random","toString","substring","removeHeading","MutationObserver","RelativeHeading","linkAlignRight","disableLink","linkIcon","linkLabel","button","useCopyLink","copyLink","AnchorBehaviors","getTarget","console","log","_handleCopyClick"],"mappings":"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"}