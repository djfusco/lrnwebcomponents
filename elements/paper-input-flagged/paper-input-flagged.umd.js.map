{"version":3,"file":"paper-input-flagged.umd.js","sources":["paper-input-flagged.umd.js"],"sourcesContent":["/**\n * Copyright 2018 The Pennsylvania State University\n * @license Apache-2.0, see License.md for full text.\n */\nimport { LitElement, html, css } from \"lit-element/lit-element.js\";\n/**\n`paper-input-flagged`\nA LRN element\n\n* @demo demo/index.html\n\n@microcopy - the mental model for this element\n - flagged - a piece of content with a status message indicating there's an issue with the input by the user. This isn't formal validation but more of feedback or suggestions about what they are entering. The default is feedback for alt metadata, useful for images.\n*/\nclass PaperInputFlagged extends LitElement {\n  /**\n   * LitElement constructable styles enhancement\n   */\n  static get styles() {\n    return [\n      css`\n        :host {\n          display: block;\n        }\n        iron-icon {\n          transition: 0.6s all ease-in;\n          width: 24px;\n          height: 24px;\n          margin-right: 4px;\n        }\n        simple-tooltip {\n          --simple-tooltip-delay-in: 100;\n          font-size: 11px;\n        }\n        #icon {\n          color: var(--paper-grey-400);\n          background-color: transparent;\n        }\n        :host([status=\"info\"]) #icon {\n          color: var(--paper-green-400);\n        }\n        :host([status=\"notice\"]) #icon {\n          color: var(--paper-grey-400);\n        }\n        :host([status=\"warning\"]) #icon {\n          color: var(--paper-yellow-700);\n        }\n        :host([status=\"error\"]) #icon {\n          color: var(--paper-red-900);\n        }\n        .element-invisible {\n          position: absolute !important;\n          clip: rect(1px, 1px, 1px, 1px);\n          overflow: hidden;\n          height: 1px;\n        }\n      `\n    ];\n  }\n  constructor() {\n    super();\n    this.disabled = false;\n    this.label = \"\";\n    this.value = \"\";\n    this.inputSuccess = {\n      message: \"You passed our simple accessibility checks.\",\n      status: \"info\"\n    };\n    this.flaggedInput = [\n      {\n        match: null,\n        message:\n          \"Alt data is required for everything except decoration images.\",\n        status: \"notice\"\n      },\n      {\n        match: \"image\",\n        message:\n          \"Screenreaders will say the word image, don't put it in the descriptive text\",\n        status: \"error\"\n      },\n      {\n        match: \"photo\",\n        message:\n          \"Screenreaders will say the word image, don't put photo in the descriptive text\",\n        status: \"error\"\n      },\n      {\n        match: \"picture\",\n        message:\n          \"Screenreaders will say the word image, don't put picture in the descriptive text\",\n        status: \"error\"\n      },\n      {\n        match: 3,\n        message:\n          \"Description not effective enough. This should be at least a sentance about what the image is.\",\n        status: \"error\"\n      },\n      {\n        match: 10,\n        message:\n          \"Make sure your alt text is descriptive enough for those that can't see the media.\",\n        status: \"warning\"\n      }\n    ];\n    import(\"@polymer/paper-input/paper-input.js\");\n    import(\"@lrnwebcomponents/simple-tooltip/simple-tooltip.js\");\n    import(\"@polymer/iron-icons/iron-icons.js\");\n    import(\"@polymer/iron-icon/iron-icon.js\");\n  }\n  updated(changedProperties) {\n    changedProperties.forEach((oldValue, propName) => {\n      let notifiedProps = [\"value\"];\n      if (notifiedProps.includes(propName)) {\n        // notify\n        let eventName = `${propName\n          .replace(/([a-z0-9]|(?=[A-Z]))([A-Z])/g, \"$1-$2\")\n          .toLowerCase()}-changed`;\n        this.dispatchEvent(\n          new CustomEvent(eventName, {\n            detail: {\n              value: this[propName]\n            }\n          })\n        );\n      }\n      if (propName == \"status\") {\n        this.icon = this._iconFromStatus(this.status);\n      }\n      if (propName == \"flaggedInput\" || propName == \"value\") {\n        this.status = this.testStatus(this.flaggedInput, this.value);\n      }\n    });\n  }\n  valueEvent(e) {\n    this.value = e.detail.value;\n  }\n  render() {\n    return html`\n      <paper-input\n        label=\"${this.label}\"\n        value=\"${this.value}\"\n        @value-changed=\"${this.valueEvent}\"\n        ?char-counter=\"${this.charCounter}\"\n        ?disabled=\"${this.disabled}\"\n        minlength=\"${this.minlength}\"\n        maxlength=\"${this.maxlength}\"\n      >\n        <iron-icon id=\"icon\" icon=\"${this.icon}\" slot=\"prefix\"></iron-icon>\n      </paper-input>\n      <div class=\"element-invisible\">${this.__activeMessage}</div>\n      <simple-tooltip\n        for=\"icon\"\n        position=\"top\"\n        offset=\"20\"\n        fit-to-visible-bounds\n      >\n        ${this.__activeMessage}\n      </simple-tooltip>\n    `;\n  }\n  static get tag() {\n    return \"paper-input-flagged\";\n  }\n  static get properties() {\n    return {\n      label: {\n        type: String\n      },\n      disabled: {\n        type: Boolean\n      },\n      /**\n       * Icon based on status\n       */\n      icon: {\n        type: String\n      },\n      maxlength: {\n        type: Number\n      },\n      minlength: {\n        type: Number\n      },\n      /**\n       * Status based on test for flagged words\n       */\n      status: {\n        type: String,\n        reflect: true\n      },\n      /**\n       * value\n       */\n      value: {\n        type: String\n      },\n      /**\n       * Input to trap and offer feedback about.\n       */\n      flaggedInput: {\n        type: Array,\n        attribute: \"flagged-input\"\n      },\n      /**\n       * Passed tests / success data.\n       */\n      inputSuccess: {\n        type: Object,\n        attribute: \"input-success\"\n      },\n      __activeMessage: {\n        type: String\n      }\n    };\n  }\n  /**\n   * testStatus based on current input\n   */\n  testStatus(test, value) {\n    for (var i in test) {\n      // special case for null if testing empty\n      if (test[i].match === null && (value === \"\" || value === null)) {\n        this.__activeMessage = test[i].message;\n        return test[i].status;\n      } else if (\n        !isNaN(test[i].match) &&\n        value.split(/\\s+/g).length < parseInt(test[i].match)\n      ) {\n        this.__activeMessage = test[i].message;\n        return test[i].status;\n      }\n      // see if we match on a piece of the rest of it\n      else if (value.toLowerCase().includes(test[i].match)) {\n        this.__activeMessage = test[i].message;\n        return test[i].status;\n      }\n    }\n    // if we beat all the test then display some nominal woo msg\n    this.__activeMessage = this.inputSuccess.message;\n    return this.inputSuccess.status;\n  }\n  /**\n   * Compute icon from status\n   */\n  _iconFromStatus(status) {\n    switch (status) {\n      case \"error\":\n        return \"icons:error\";\n        break;\n      case \"warning\":\n      case \"notice\":\n        return \"icons:warning\";\n        break;\n      case \"info\":\n        return \"icons:info-outline\";\n        break;\n      default:\n        return \"icons:info\";\n        break;\n    }\n  }\n}\nwindow.customElements.define(PaperInputFlagged.tag, PaperInputFlagged);\nexport { PaperInputFlagged };\n"],"names":["PaperInputFlagged","disabled","label","value","inputSuccess","message","status","flaggedInput","match","LitElement","css","changedProperties","forEach","oldValue","propName","includes","eventName","replace","toLowerCase","_this2","dispatchEvent","CustomEvent","detail","icon","_iconFromStatus","testStatus","e","html","this","valueEvent","charCounter","minlength","maxlength","__activeMessage","test","i","isNaN","split","length","parseInt","type","String","Boolean","Number","reflect","Array","attribute","Object","window","customElements","define","tag"],"mappings":"6mFAcMA,yKA+CGC,UAAW,IACXC,MAAQ,KACRC,MAAQ,KACRC,aAAe,CAClBC,QAAS,8CACTC,OAAQ,UAELC,aAAe,CAClB,CACEC,MAAO,KACPH,QACE,gEACFC,OAAQ,UAEV,CACEE,MAAO,QACPH,QACE,8EACFC,OAAQ,SAEV,CACEE,MAAO,QACPH,QACE,iFACFC,OAAQ,SAEV,CACEE,MAAO,UACPH,QACE,mFACFC,OAAQ,SAEV,CACEE,MAAO,EACPH,QACE,gGACFC,OAAQ,SAEV,CACEE,MAAO,GACPH,QACE,oFACFC,OAAQ,mBAGL,8CACA,6DACA,4CACA,iRA/FqBG,2DAKrB,CACLC,mDA2FIC,cACNA,EAAkBC,QAAQ,SAACC,EAAUC,MACf,CAAC,SACHC,SAASD,GAAW,KAEhCE,YAAeF,EAChBG,QAAQ,+BAAgC,SACxCC,0BACHC,EAAKC,cACH,IAAIC,YAAYL,EAAW,CACzBM,OAAQ,CACNnB,MAAOgB,EAAKL,OAKJ,UAAZA,IACFK,EAAKI,KAAOJ,EAAKK,gBAAgBL,EAAKb,SAExB,gBAAZQ,GAA0C,SAAZA,IAChCK,EAAKb,OAASa,EAAKM,WAAWN,EAAKZ,aAAcY,EAAKhB,6CAIjDuB,QACJvB,MAAQuB,EAAEJ,OAAOnB,8CAGfwB,WAEMC,KAAK1B,MACL0B,KAAKzB,MACIyB,KAAKC,WACND,KAAKE,YACTF,KAAK3B,SACL2B,KAAKG,UACLH,KAAKI,UAEWJ,KAAKL,KAEHK,KAAKK,gBAOlCL,KAAKK,oDA8DFC,EAAM/B,OACV,IAAIgC,KAAKD,EAAM,IAEI,OAAlBA,EAAKC,GAAG3B,QAA6B,KAAVL,GAA0B,OAAVA,eACxC8B,gBAAkBC,EAAKC,GAAG9B,QACxB6B,EAAKC,GAAG7B,OACV,IACJ8B,MAAMF,EAAKC,GAAG3B,QACfL,EAAMkC,MAAM,QAAQC,OAASC,SAASL,EAAKC,GAAG3B,mBAEzCyB,gBAAkBC,EAAKC,GAAG9B,QACxB6B,EAAKC,GAAG7B,OAGZ,GAAIH,EAAMe,cAAcH,SAASmB,EAAKC,GAAG3B,mBACvCyB,gBAAkBC,EAAKC,GAAG9B,QACxB6B,EAAKC,GAAG7B,mBAId2B,gBAAkBL,KAAKxB,aAAaC,QAClCuB,KAAKxB,aAAaE,+CAKXA,UACNA,OACD,cACI,kBAEJ,cACA,eACI,oBAEJ,aACI,mCAGA,kDAhGJ,+DAGA,CACLJ,MAAO,CACLsC,KAAMC,QAERxC,SAAU,CACRuC,KAAME,SAKRnB,KAAM,CACJiB,KAAMC,QAERT,UAAW,CACTQ,KAAMG,QAERZ,UAAW,CACTS,KAAMG,QAKRrC,OAAQ,CACNkC,KAAMC,OACNG,SAAS,GAKXzC,MAAO,CACLqC,KAAMC,QAKRlC,aAAc,CACZiC,KAAMK,MACNC,UAAW,iBAKb1C,aAAc,CACZoC,KAAMO,OACND,UAAW,iBAEbb,gBAAiB,CACfO,KAAMC,kBAmDdO,OAAOC,eAAeC,OAAOlD,EAAkBmD,IAAKnD"}